<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
    <VBox class="sapUiMediumMarginTop sapUiResponsiveContentPadding">
        <!-- Panel con título -->
        <Panel>
            <headerToolbar>
                <Toolbar>
                    <Title text="{i18n>controlDeDesviosAmbientales}" />
                    <ToolbarSpacer />
                    <SearchField id="searchField" width="20%" search=".onSearch"/>
                    <Button icon="sap-icon://sort" press=".onSort" />
                    <Button
                        icon="sap-icon://add"
                        press=".onOpenDialog">
                        <customData>
                            <core:CustomData key="param" value="CDA"/>
                        </customData>
                    </Button>

                </Toolbar>
            </headerToolbar>

            <!-- Tabla para control de desvíos ambientales -->

            <!-- Tabla para control de desvíos ambientales -->
            <Table id="environmentalDeviationControlTable" class="sapUiTinyMargin" inset="false" items="{mainModel>/DatosFormularioCDA/TableCDA/Data}">
                <columns>
                    <Column>
                        <Text text="{i18n>fechaEntrega}" />
                    </Column>
                    <Column>
                        <Text text="{i18n>fechaDeteccion}" />
                    </Column>
                    <Column>
                        <Text text="{i18n>estado}" />
                    </Column>
                    <Column>
                        <Text text="{i18n>observaciones}" />
                    </Column>
                    <Column>
                        <Text text="{i18n>acciones}" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem>
                        <cells>
                            <Text text="{mainModel>fechaEntrega}" />
                            <Text text="{mainModel>fecha_deteccion}" />
                             <ObjectStatus text="{mainModel>estado/descripcion}" inverted="true" state="{mainModel>estado/color}"/>
                            <Text text="{mainModel>observaciones}" />
                                <HBox>
                                    <core:Icon
                                        src="sap-icon://detail-view"
                                        color="#2471a3"
                                        press="onViewDetails"
                                        class="sapUiSmallMarginEnd"
                                    />
                                    <core:Icon color="#212121" src="sap-icon://edit"  press="onEditCDA" class="sapUiSmallMarginEnd" />
                                    <core:Icon src="sap-icon://delete" color="#FF5733" press="onAddManual" class="sapUiSmallMarginEnd" />       
                                    <core:Icon src="sap-icon://paper-plane" color="#27ae60" press="onSendPSDA" class="sapUiSmallMarginEnd" />
                                </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>

            
        </Panel>
    </VBox>
</core:FragmentDefinition>
